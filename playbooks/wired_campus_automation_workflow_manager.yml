---
# ===================================================================================================
# WIRED CAMPUS AUTOMATION WORKFLOW MANAGER - EXAMPLE PLAYBOOK
# ===================================================================================================
#
# This playbook demonstrates comprehensive usage examples for the Wired Campus Automation
# Workflow Manager module. It includes positive scenarios for both merged and deleted states
# with inline configurations for easy reference.
#
# FEATURES COVERED:
# - VLANs (create, update, delete)
# - CDP (configure, reset)
# - LLDP (configure, reset)
# - STP (configure, reset/delete instances)
# - VTP (configure, reset)
# - DHCP Snooping (configure, reset)
# - IGMP Snooping (configure, reset)
# - MLD Snooping (configure, reset)
# - Authentication (configure, reset)
# - Logical Ports (configure port channels)
# - Port Configuration (interface-level settings)
# - Comprehensive multi-feature configurations
#
# ===================================================================================================

- name: Cisco DNA Center Wired Campus Automation Examples
  hosts: dnac_servers
  gather_facts: false
  vars_files:
    - "credentials.yml"
  vars:
    # DNA Center connection parameters
    dnac_host: "{{ ansible_host }}"
    dnac_username: "{{ username }}"
    dnac_password: "{{ password }}"
    dnac_verify: false
    dnac_port: 443
    dnac_version: "3.1.3.0"
    dnac_debug: false

    # Common login anchor for reuse
    dnac_login: &dnac_login
      dnac_host: "{{ dnac_host }}"
      dnac_username: "{{ dnac_username }}"
      dnac_password: "{{ dnac_password }}"
      dnac_verify: "{{ dnac_verify }}"
      dnac_port: "{{ dnac_port }}"
      dnac_version: "{{ dnac_version }}"
      dnac_debug: "{{ dnac_debug }}"
      dnac_log: true
      dnac_log_level: INFO

  tasks:
    # =============================================================================
    # VLAN CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Create multiple VLANs with comprehensive settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vlans:
                - vlan_id: 100
                  vlan_name: "Production_Network"
                  vlan_admin_status: true
                - vlan_id: 200
                  vlan_name: "Development_Network"
                  vlan_admin_status: true
                - vlan_id: 300
                  vlan_name: "Guest_Network"
                  vlan_admin_status: false
      register: result_vlans_create
      tags: [vlans, create]

    - name: "EXAMPLE: Update existing VLAN settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vlans:
                - vlan_id: 300
                  vlan_name: "Guest_Network_Updated"
                  vlan_admin_status: true
      register: result_vlans_update
      tags: [vlans, update]

    - name: "EXAMPLE: Delete specific VLANs"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vlans:
                - vlan_id: 300
      register: result_vlans_delete
      tags: [vlans, delete]

    - name: "EXAMPLE: Delete specific VLANs with full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vlans:
                - vlan_id: 100
                  vlan_name: "Production_Network"
                  vlan_admin_status: true
                - vlan_id: 200
                  vlan_name: "Development_Network"
                  vlan_admin_status: true
                - vlan_id: 300
                  vlan_name: "Guest_Network"
                  vlan_admin_status: false
      register: result_vlans_delete_full_config
      tags: [vlans, delete]

    # =============================================================================
    # CDP CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure CDP with all parameters"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              cdp:
                cdp_admin_status: true
                cdp_hold_time: 180
                cdp_timer: 60
                cdp_advertise_v2: true
                cdp_log_duplex_mismatch: true
      register: result_cdp_configure
      tags: [cdp, configure]

    - name: "EXAMPLE: Update CDP timer settings only"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              cdp:
                cdp_hold_time: 240
                cdp_timer: 90
      register: result_cdp_update
      tags: [cdp, update]

    - name: "EXAMPLE: Reset CDP to default settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              cdp: {}
      register: result_cdp_reset
      tags: [cdp, reset]

    - name: "EXAMPLE:  Reset CDP to default settings while providing full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              cdp:
                cdp_admin_status: true
                cdp_hold_time: 180
                cdp_timer: 60
                cdp_advertise_v2: true
                cdp_log_duplex_mismatch: true
      register: result_cdp_reset_full_config
      tags: [cdp, reset]

    # =============================================================================
    # LLDP CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure LLDP with comprehensive settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              lldp:
                lldp_admin_status: true
                lldp_hold_time: 300
                lldp_timer: 30
                lldp_reinitialization_delay: 5
      register: result_lldp_configure
      tags: [lldp, configure]

    - name: "EXAMPLE: Configure LLDP with boundary values"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              lldp:
                lldp_admin_status: true
                lldp_hold_time: 0  # No aging
                lldp_timer: 5      # Minimum timer
                lldp_reinitialization_delay: 2  # Minimum delay
      register: result_lldp_boundary
      tags: [lldp, boundary]

    - name: "EXAMPLE: Reset LLDP to default settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              lldp: {}
      register: result_lldp_reset
      tags: [lldp, reset]

    - name: "EXAMPLE: Reset LLDP to default settings while providing full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              lldp:
                lldp_admin_status: true
                lldp_hold_time: 300
                lldp_timer: 30
                lldp_reinitialization_delay: 5
      register: result_lldp_reset_full_config
      tags: [lldp, reset]

    # =============================================================================
    # STP CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure STP with global settings and instances"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              stp:
                stp_mode: "MST"
                stp_portfast_mode: "ENABLE"
                stp_bpdu_guard: true
                stp_bpdu_filter: false
                stp_backbonefast: true
                stp_extended_system_id: true
                stp_logging: true
                stp_loopguard: false
                stp_transmit_hold_count: 6
                stp_uplinkfast: false
                stp_uplinkfast_max_update_rate: 200
                stp_etherchannel_guard: true
                stp_instances:
                  - stp_instance_vlan_id: 100
                    stp_instance_priority: 32768
                    enable_stp: true
                    stp_instance_max_age_timer: 20
                    stp_instance_hello_interval_timer: 2
                    stp_instance_forward_delay_timer: 15
                  - stp_instance_vlan_id: 200
                    stp_instance_priority: 16384
                    enable_stp: true
      register: result_stp_configure
      tags: [stp, configure]

    - name: "EXAMPLE: Update STP mode and add new instance"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              stp:
                stp_mode: "RSTP"
                stp_instances:
                  - stp_instance_vlan_id: 400
                    stp_instance_priority: 8192
                    enable_stp: true
      register: result_stp_update
      tags: [stp, update]

    - name: "EXAMPLE: Delete specific STP instances"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              stp:
                stp_instances:
                  - stp_instance_vlan_id: 400
      register: result_stp_delete_instances
      tags: [stp, delete]

    - name: "EXAMPLE: Reset STP to default settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              stp: {}
      register: result_stp_reset
      tags: [stp, reset]

    - name: "EXAMPLE: Delete specific STP instances while providing full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              stp:
                stp_mode: "MST"
                stp_portfast_mode: "ENABLE"
                stp_bpdu_guard: true
                stp_bpdu_filter: false
                stp_backbonefast: true
                stp_extended_system_id: true
                stp_logging: true
                stp_loopguard: false
                stp_transmit_hold_count: 6
                stp_uplinkfast: false
                stp_uplinkfast_max_update_rate: 200
                stp_etherchannel_guard: true
                stp_instances:
                  - stp_instance_vlan_id: 100
                    stp_instance_priority: 32768
                    enable_stp: true
                    stp_instance_max_age_timer: 20
                    stp_instance_hello_interval_timer: 2
                    stp_instance_forward_delay_timer: 15
                  - stp_instance_vlan_id: 200
                    stp_instance_priority: 16384
                    enable_stp: true
      register: result_stp_delete_instances_full_config
      tags: [stp, delete]

    # =============================================================================
    # VTP CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure VTP with comprehensive settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vtp:
                vtp_mode: "TRANSPARENT"
                vtp_version: "VERSION_2"
                vtp_domain_name: "CORPORATE_DOMAIN"
                vtp_pruning: true
                vtp_configuration_file_name: "flash:vtp_config.dat"
                vtp_source_interface: "Loopback0"
      register: result_vtp_configure
      tags: [vtp, configure]

    - name: "EXAMPLE: Update VTP to client mode"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vtp:
                vtp_mode: "CLIENT"
                vtp_pruning: false
      register: result_vtp_update
      tags: [vtp, update]

    - name: "EXAMPLE: Reset VTP to default settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vtp: {}
      register: result_vtp_reset
      tags: [vtp, reset]

    - name: "EXAMPLE: Reset VTP to default settings while providing full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              vtp:
                vtp_mode: "TRANSPARENT"
                vtp_version: "VERSION_2"
                vtp_domain_name: "CORPORATE_DOMAIN"
                vtp_pruning: true
                vtp_configuration_file_name: "flash:vtp_config.dat"
                vtp_source_interface: "Loopback0"
      register: result_vtp_reset_full_config
      tags: [vtp, reset]

    # =============================================================================
    # DHCP SNOOPING CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure DHCP Snooping with comprehensive settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              dhcp_snooping:
                dhcp_admin_status: true
                dhcp_snooping_vlans: [100, 200, 300]
                dhcp_snooping_glean: true
                dhcp_snooping_database_agent_url: "tftp://192.168.1.100/dhcp_binding.db"
                dhcp_snooping_database_timeout: 600
                dhcp_snooping_database_write_delay: 300
                dhcp_snooping_proxy_bridge_vlans: [100, 200]
      register: result_dhcp_snooping_configure
      tags: [dhcp_snooping, configure]

    - name: "EXAMPLE: Update DHCP Snooping VLAN list"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              dhcp_snooping:
                dhcp_snooping_vlans: [100, 200, 400, 500]
      register: result_dhcp_snooping_update
      tags: [dhcp_snooping, update]

    - name: "EXAMPLE: Reset DHCP Snooping to default settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              dhcp_snooping: {}
      register: result_dhcp_snooping_reset
      tags: [dhcp_snooping, reset]

    - name: "EXAMPLE: Reset DHCP Snooping to default settings while providing full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              dhcp_snooping:
                dhcp_admin_status: true
                dhcp_snooping_vlans: [100, 200, 300]
                dhcp_snooping_glean: true
                dhcp_snooping_database_agent_url: "tftp://192.168.1.100/dhcp_binding.db"
                dhcp_snooping_database_timeout: 600
                dhcp_snooping_database_write_delay: 300
                dhcp_snooping_proxy_bridge_vlans: [100, 200]
      register: result_dhcp_snooping_reset_full_config
      tags: [dhcp_snooping, reset]

    # =============================================================================
    # IGMP SNOOPING CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure IGMP Snooping with global and VLAN-specific settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              igmp_snooping:
                enable_igmp_snooping: true
                igmp_snooping_querier: false
                igmp_snooping_querier_address: "192.168.1.10"
                igmp_snooping_querier_version: "VERSION_2"
                igmp_snooping_querier_query_interval: 125
                igmp_snooping_vlans:
                  - igmp_snooping_vlan_id: 100
                    enable_igmp_snooping: true
                    igmp_snooping_querier: false
                    igmp_snooping_querier_address: "192.168.1.11"
                    igmp_snooping_querier_version: "VERSION_2"
                    igmp_snooping_querier_query_interval: 125
                    igmp_snooping_mrouter_port_list: ["GigabitEthernet1/0/1", "GigabitEthernet1/0/2"]
                  - igmp_snooping_vlan_id: 200
                    enable_igmp_snooping: true
                    igmp_snooping_querier: true
                    igmp_snooping_querier_version: "VERSION_3"
                    igmp_snooping_querier_query_interval: 90
      register: result_igmp_snooping_configure
      tags: [igmp_snooping, configure]

    - name: "EXAMPLE: Update IGMP Snooping VLAN settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              igmp_snooping:
                igmp_snooping_vlans:
                  - igmp_snooping_vlan_id: 300
                    enable_igmp_snooping: true
                    igmp_snooping_querier: false
                    igmp_snooping_querier_query_interval: 180
      register: result_igmp_snooping_update
      tags: [igmp_snooping, update]

    # =============================================================================
    # MLD SNOOPING CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure MLD Snooping with comprehensive IPv6 settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              mld_snooping:
                enable_mld_snooping: true
                mld_snooping_querier: false
                mld_snooping_querier_address: "fe80::1"
                mld_snooping_querier_version: "VERSION_2"
                mld_snooping_listener: true
                mld_snooping_querier_query_interval: 125
                mld_snooping_vlans:
                  - mld_snooping_vlan_id: 100
                    enable_mld_snooping: true
                    mld_snooping_enable_immediate_leave: false
                    mld_snooping_querier: false
                    mld_snooping_querier_address: "fe80::10"
                    mld_snooping_querier_version: "VERSION_2"
                    mld_snooping_querier_query_interval: 125
                    mld_snooping_mrouter_port_list: ["GigabitEthernet1/0/3", "GigabitEthernet1/0/4"]
                  - mld_snooping_vlan_id: 200
                    enable_mld_snooping: true
                    mld_snooping_enable_immediate_leave: true
                    mld_snooping_querier: true
                    mld_snooping_querier_version: "VERSION_1"
      register: result_mld_snooping_configure
      tags: [mld_snooping, configure]

    # =============================================================================
    # AUTHENTICATION CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Enable 802.1X Authentication with new style configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              authentication:
                enable_dot1x_authentication: true
                authentication_config_mode: "NEW_STYLE"
      register: result_authentication_configure
      tags: [authentication, configure]

    - name: "EXAMPLE: Switch to legacy authentication mode"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              authentication:
                authentication_config_mode: "LEGACY"
      register: result_authentication_update
      tags: [authentication, update]

    - name: "EXAMPLE: Reset Authentication to default settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              authentication: {}
      register: result_authentication_reset
      tags: [authentication, reset]

    - name: "EXAMPLE: Reset Authentication to default settings while providing full configuration"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              authentication:
                enable_dot1x_authentication: true
                authentication_config_mode: "NEW_STYLE"
      register: result_authentication_reset_full_config
      tags: [authentication, reset]

    # =============================================================================
    # LOGICAL PORTS (PORT CHANNELS) CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure multiple port channels with different protocols"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              logical_ports:
                port_channel_auto: false
                port_channel_lacp_system_priority: 4096
                port_channel_load_balancing_method: "SRC_DST_MIXED_IP_PORT"
                port_channels:
                  - port_channel_protocol: "LACP"
                    port_channel_name: "Port-channel1"
                    port_channel_min_links: 2
                    port_channel_members:
                      - port_channel_interface_name: "GigabitEthernet1/0/10"
                        port_channel_mode: "ACTIVE"
                        port_channel_port_priority: 128
                        port_channel_rate: 30
                      - port_channel_interface_name: "GigabitEthernet1/0/11"
                        port_channel_mode: "ACTIVE"
                        port_channel_port_priority: 128
                        port_channel_rate: 30
                  - port_channel_protocol: "PAGP"
                    port_channel_name: "Port-channel2"
                    port_channel_min_links: 1
                    port_channel_members:
                      - port_channel_interface_name: "GigabitEthernet1/0/12"
                        port_channel_mode: "DESIRABLE"
                        port_channel_port_priority: 128
                        port_channel_learn_method: "AGGREGATION_PORT"
      register: result_logical_ports_configure
      tags: [logical_ports, configure]

    - name: "EXAMPLE: Update port channel configuration and add new member"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              logical_ports:
                port_channel_load_balancing_method: "SRC_DST_MAC"
                port_channels:
                  - port_channel_protocol: "LACP"
                    port_channel_name: "Port-channel1"
                    port_channel_members:
                      - port_channel_interface_name: "GigabitEthernet1/0/13"
                        port_channel_mode: "ACTIVE"
                        port_channel_port_priority: 256
                        port_channel_rate: 1
      register: result_logical_ports_update
      tags: [logical_ports, update]

    - name: "EXAMPLE: Configure static port channel (no protocol)"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              logical_ports:
                port_channel_auto: false
                port_channels:
                  - port_channel_protocol: "NONE"
                    port_channel_name: "Port-channel3"
                    port_channel_min_links: 2
                    port_channel_members:
                      - port_channel_interface_name: "GigabitEthernet1/0/14"
                        port_channel_mode: "ON"
                      - port_channel_interface_name: "GigabitEthernet1/0/15"
                        port_channel_mode: "ON"
      register: result_logical_ports_static
      tags: [logical_ports, static]

    # =============================================================================
    # PORT CONFIGURATION EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Configure access port with comprehensive settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              port_configuration:
                - interface_name: "GigabitEthernet1/0/5"
                  switchport_interface_config:
                    switchport_description: "Access Port - Production Network"
                    switchport_mode: "ACCESS"
                    access_vlan: 100
                    admin_status: true
                    voice_vlan: 200
                  vlan_trunking_interface_config:
                    enable_dtp_negotiation: "AUTO"
                    protected: false
                  dot1x_interface_config:
                    dot1x_interface_authentication_order: ["DOT1X", "MAB"]
                    dot1x_interface_authentication_mode: "OPEN"
                    dot1x_interface_pae_type: "AUTHENTICATOR"
                    dot1x_interface_control_direction: "BOTH"
                    dot1x_interface_host_mode: "MULTI_AUTHENTICATION"
                    dot1x_interface_port_control: "AUTO"
                    dot1x_interface_inactivity_timer: 300
                    dot1x_interface_max_reauth_requests: 3
                    dot1x_interface_reauth_timer: 3600
                  mab_interface_config:
                    mab_interface_enable: true
                  stp_interface_config:
                    stp_interface_enable_portfast: true
                    stp_interface_enable_bpdu_guard: true
                    stp_interface_enable_bpdu_filter: false
                    stp_interface_enable_root_guard: false
                    stp_interface_enable_loop_guard: false
                    stp_interface_port_priority: 128
                    stp_interface_cost: 19
                  dhcp_snooping_interface_config:
                    dhcp_snooping_interface_rate_limit: 100
                    dhcp_snooping_interface_trust: true
                  cdp_interface_config:
                    cdp_interface_admin_status: true
                    cdp_interface_logging: true
                  lldp_interface_config:
                    lldp_interface_transmit: true
                    lldp_interface_receive: true
                  vtp_interface_config:
                    vtp_interface_admin_status: true
      register: result_port_config_access
      tags: [port_configuration, access]

    - name: "EXAMPLE: Configure trunk port with VLAN settings"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              port_configuration:
                - interface_name: "GigabitEthernet1/0/6"
                  switchport_interface_config:
                    switchport_description: "Trunk Port - Inter-Switch Link"
                    switchport_mode: "TRUNK"
                    allowed_vlans: [100, 200, 300, 400]
                    native_vlan_id: 100
                    admin_status: true
                  vlan_trunking_interface_config:
                    enable_dtp_negotiation: "ON"
                    protected: true
                    pruning_vlan_ids: [300, 400]
                  stp_interface_config:
                    stp_interface_enable_portfast: false
                    stp_interface_enable_bpdu_guard: false
                    stp_interface_enable_bpdu_filter: false
                    stp_interface_enable_root_guard: true
                    stp_interface_enable_loop_guard: true
                    stp_interface_port_priority: 64
                    stp_interface_cost: 100
      register: result_port_config_trunk
      tags: [port_configuration, trunk]

    - name: "EXAMPLE: Update interface description and VLAN assignment"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              port_configuration:
                - interface_name: "GigabitEthernet1/0/5"
                  switchport_interface_config:
                    switchport_description: "Updated Access Port - Security Network"
                    access_vlan: 300
      register: result_port_config_update
      tags: [port_configuration, update]

    # =============================================================================
    # COMPREHENSIVE MULTI-FEATURE EXAMPLES
    # =============================================================================

    - name: "EXAMPLE: Comprehensive network configuration with all features"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: merged
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              # VLANs for the complete network
              vlans:
                - vlan_id: 10
                  vlan_name: "Management"
                  vlan_admin_status: true
                - vlan_id: 20
                  vlan_name: "Production"
                  vlan_admin_status: true
                - vlan_id: 30
                  vlan_name: "Development"
                  vlan_admin_status: true
                - vlan_id: 40
                  vlan_name: "Guest"
                  vlan_admin_status: true

              # Discovery protocols
              cdp:
                cdp_admin_status: true
                cdp_hold_time: 180
                cdp_timer: 60
                cdp_advertise_v2: true
                cdp_log_duplex_mismatch: true

              lldp:
                lldp_admin_status: true
                lldp_hold_time: 240
                lldp_timer: 30
                lldp_reinitialization_delay: 3

              # Spanning Tree Protocol
              stp:
                stp_mode: "RSTP"
                stp_portfast_mode: "ENABLE"
                stp_bpdu_guard: true
                stp_bpdu_filter: false
                stp_backbonefast: true
                stp_extended_system_id: true
                stp_logging: true
                stp_instances:
                  - stp_instance_vlan_id: 10
                    stp_instance_priority: 32768
                    enable_stp: true
                  - stp_instance_vlan_id: 20
                    stp_instance_priority: 16384
                    enable_stp: true

              # VLAN Trunking Protocol
              vtp:
                vtp_mode: "SERVER"
                vtp_version: "VERSION_2"
                vtp_domain_name: "ENTERPRISE_DOMAIN"
                vtp_pruning: true

              # Security features
              dhcp_snooping:
                dhcp_admin_status: true
                dhcp_snooping_vlans: [20, 30, 40]
                dhcp_snooping_glean: true

              igmp_snooping:
                enable_igmp_snooping: true
                igmp_snooping_querier: false
                igmp_snooping_querier_version: "VERSION_2"
                igmp_snooping_vlans:
                  - igmp_snooping_vlan_id: 20
                    enable_igmp_snooping: true
                    igmp_snooping_querier: false

              # Authentication
              authentication:
                enable_dot1x_authentication: true
                authentication_config_mode: "NEW_STYLE"

              # Port channels for redundancy
              logical_ports:
                port_channel_auto: false
                port_channel_lacp_system_priority: 8192
                port_channel_load_balancing_method: "SRC_DST_IP"
                port_channels:
                  - port_channel_protocol: "LACP"
                    port_channel_name: "Port-channel10"
                    port_channel_min_links: 2
                    port_channel_members:
                      - port_channel_interface_name: "GigabitEthernet1/0/16"
                        port_channel_mode: "ACTIVE"
                        port_channel_port_priority: 128
                        port_channel_rate: 30
                      - port_channel_interface_name: "GigabitEthernet1/0/17"
                        port_channel_mode: "ACTIVE"
                        port_channel_port_priority: 128
                        port_channel_rate: 30

              # Interface configurations
              port_configuration:
                - interface_name: "GigabitEthernet1/0/1"
                  switchport_interface_config:
                    switchport_description: "Management Port"
                    switchport_mode: "ACCESS"
                    access_vlan: 10
                    admin_status: true
                  stp_interface_config:
                    stp_interface_enable_portfast: true
                    stp_interface_enable_bpdu_guard: true
                  dhcp_snooping_interface_config:
                    dhcp_snooping_interface_trust: true
                - interface_name: "GigabitEthernet1/0/2"
                  switchport_interface_config:
                    switchport_description: "Production User Port"
                    switchport_mode: "ACCESS"
                    access_vlan: 20
                    admin_status: true
                  dot1x_interface_config:
                    dot1x_interface_authentication_order: ["DOT1X", "MAB"]
                    dot1x_interface_port_control: "AUTO"
                  stp_interface_config:
                    stp_interface_enable_portfast: true
      register: result_comprehensive_config
      tags: [comprehensive, all_features]

    - name: "EXAMPLE: Comprehensive cleanup - Reset all features to defaults"
      cisco.dnac.wired_campus_automation_workflow_manager:
        <<: *dnac_login
        state: deleted
        config:
          - ip_address: "204.1.2.3"
            device_collection_status_check: false
            layer2_configuration:
              # Delete test VLANs
              vlans:
                - vlan_id: 10
                - vlan_id: 20
                - vlan_id: 30
                - vlan_id: 40
                - vlan_id: 100
                - vlan_id: 200
                - vlan_id: 300
                - vlan_id: 400
                - vlan_id: 500

              # Reset all protocols to defaults
              cdp: {}
              lldp: {}
              vtp: {}
              dhcp_snooping: {}
              igmp_snooping: {}
              mld_snooping: {}
              authentication: {}

              # Reset STP and delete instances
              stp: {}
      register: result_comprehensive_cleanup
      tags: [cleanup, reset_all]
